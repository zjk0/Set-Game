# 神奇形色牌（Set）

## 简介

四种属性，每种属性三个取值：个数（1、2、3），颜色（红、绿、紫），形状（菱形、椭圆形、波浪形），纹路（实心、条纹、空心）。

三张牌可以成为一组Set需要符合以下所有条件：

- 三张牌的数字相同，或者都不相同。
- 三张牌的颜色相同，或者都不相同。
- 三张牌的形状相同，或者都不相同。
- 三张牌的纹路相同，或者都不相同。

现在需要通过数字图像处理技术，从一系列牌中，找出所有的Set。

## 思考

首先，需要把图像中的牌找出来，然后考虑如何识别牌的四种属性，然后再判断有没有set

除了颜色这个属性，其他三个属性在灰度图像中也能识别出来，所以对于一张图像，可以有两个副本，一个副本是RGB图像，一个副本是灰度图像，RGB图像用于识别颜色属性，灰度图像用于识别形状、个数、纹路这三个属性。

### 牌的寻找

连通域检测，根据不同的标签值，找到不同的牌

### 颜色识别

在一张牌中，从RGB空间转换到HSV空间，因为不同颜色有着不同的色相范围，所以对色相值进行判断即可识别出颜色，也就是判断H的值。

### 个数识别

在一张牌中，先进行图像分割（基于阈值或基于边缘都行），然后沿着图像的竖直中轴线，或者中轴线附近，从上往下扫描，判断经过的边缘的个数。先进行基于边缘的图像分割，得到图像边缘，然后开始扫描，找出有多少处像素值突变的地方。

### 纹路识别

在一张牌中，先进行基于阈值的图像分割，然后在分割后的图像的中心处，取一个以图像中心为中心的邻域，判断邻域内像素值的情况。如果邻域内像素值没有全部相同，那么纹路为条纹；如果邻域内像素值全部相同，通过判断像素值来得到纹路是实心还是空心。

### 形状识别

在一张牌中，先进行基于边缘的图像分割，然后沿着图像的竖直中轴线，从上往下扫描，找到边缘点之后，开始遍历该边缘点所在的行的全部像素点，查找有多少个边缘点，通过这一行的边缘点的个数来判断形状。